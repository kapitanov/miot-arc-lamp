<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Arc Reactor State</title>
</head>

<body style="background: black" ;>
    <svg height="100" width="100" style="position: fixed; left: 50%; top: 50%; margin-left: -50px;margin-top: -50px;">
        <circle id="circle" cx="50" cy="50" r="40" stroke="#00d9d3" stroke-width="10" fill="#ff114d" stroke-dasharray="5,5" />
      </svg>
</body>

<script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
<script>
    function update() {
        $.getJSON('/state')
            .then(function(state) {
                var el = document.getElementById('circle');

                // ring
                switch (state.ring) {
                    case 'off':
                        el.setAttribute('stroke', '#333');
                        break;
                    case 'on':
                        el.setAttribute('stroke', '#0dd');
                        break;
                    case 'blink':
                        el.setAttribute('stroke', '#0ff');
                        break;
                }

                // core (RGB)
                var color = '#';
                switch (state.core_r) {
                    case 'off':
                        color += '33';
                        break;
                    case 'on':
                        color += 'dd';
                        break;
                    case 'blink':
                        color += 'ff';
                        break;
                }
                switch (state.core_g) {
                    case 'off':
                        color += '33';
                        break;
                    case 'on':
                        color += 'dd';
                        break;
                    case 'blink':
                        color += 'ff';
                        break;
                }
                switch (state.core_b) {
                    case 'off':
                        color += '33';
                        break;
                    case 'on':
                        color += 'dd';
                        break;
                    case 'blink':
                        color += 'ff';
                        break;
                }

                el.setAttribute('fill', color);
            })
            .fail(function() {

            })
            .always(function() {
                setTimeout(update, 1000);
            })
    }

    $(function() {
        update();
    });
</script>

</html>